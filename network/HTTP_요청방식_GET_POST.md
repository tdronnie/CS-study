# HTTP_요청방식_GET_POST
HTTP는 요청과 응답의 구조로 이루어지는데 클라이언트가 서버에 **요청**을 보내면 서버는 클라이언트에게 **응답**을 하는 식이다.

get과 post는 HTTP 프로토콜중 하나로 둘 다 서버에 요청 메시지를 전달할 때 사용한다.

- 요청메시지 구조
  ![image](https://user-images.githubusercontent.com/69182630/233840928-8592b65c-7817-4f77-84c0-5ba518ebb030.png)
  - start line : HTTP 메서드 / 요청 주소 / HTTP버전
  - header : 요청에 대한 추가정보(body 길이 등), key:value 형태를 가진다.
  - Body : 요청 메시지가 전송하는 데이터를 담는다. 전송 데이터 없다면 비어있음, POST일 경우 폼 데이터 포함
  
  cf. header와 body 사이에는 구분을 위한 공백라인이 존재한다.

---

## GET
GET 메서드는 서버의 리소스를 조회하는데 사용된다. 리소스에 직접 접근하거나 질의를 날릴 때 사용한다.

클라이언트가 서버에게 요청 메시지를 보낼 때 헤더의 url에 요청 데이터를 담아 전송한다.

쿼리 파라미터를 사용해서 서버로 데이터를 전달한다.
```
.../page/1
...?name=lee&age=24
```
메시지 바디는 없고 위처럼 쿼리 파라미터에 데이터를 포함시켜서 전달한다.
<br>따라서 요청 데이터 url에 그대로 노출되어 전송 가능한 데이터 크기가 한정되어있고 보안의 위험성이 있다.

cf. HTTP/1.1은 1.0버전에서 HTTP Pipelining이 도입되어 하나의 연결에서 많은 요청과 응답을 처리할 수 있게 되었다.
  하지만 앞의 요청에 따라 뒤의 요청이 지연되는 HOL Blocking이 발생하면서 여러 개선안이 나왔고 좀 더 수정되어 HTTP/2.0가 나왔다.

검색, 필터, 페이징에 사용된다.

GET은 반복되거나 불필요한 요청을 제한하기 위해 요청이 캐시될 수도 있다. 변경될 일이 적은 자원의 경우 첫번째 요청 시 캐시해두고
재요청이 올경우 서버에 요청을 보내는 것이 아닌 캐시된 데이터를 전송한다.

GET은 서버의 자원을 요청할 때 이용되고 같은 요청을 여러번 해도 서버의 상태는 변하지 않는다.
<br>이를 **멱등성이 보장된다**고하고 특히 GET의 경우는 서버의 상태를 변하게 할 여지가 전혀 없기 때문에 **안전한 메서드**라고도 할 수 있다.

cf. DELETE의 경우 존재하는 데이터를 삭제하고 같은 요청을 여러번 할 경우 서버의 상태는 변하지 않는다. 따라서 멱등하지만 데이터를 제거하는 메서드로 안전한 메서드는 아니다.

멱등성의 요점은 **요청에 대한 서버의 상태가 항상 같은지**이다.

---
## POST
POST 메서드는 서버의 리소스를 변경하는데 사용된다.

클라이언트가 서버에게 요청 메시지를 보낼 때 바디에 요청 데이터를 담아 전송한다.

HTML form을 사용한다. 메시지 바디에 데이터를 포함해서 보내기 때문에 데이터가 어떤 형식인지 content-type을 꼭 지정해주어야 한다.
```
content-type: application/x.www-form-urlencoded
message body: username=hello&age=20
```
메시지 바디에 쿼리 파라미터 형식으로 데이터를 전달한다. GET방식의 쿼리 파라미터와 매우 유사하다.
클라이언트 측에서는 데이터의 형식을 다르게 전달하지만 서버 측에서는 구분없이 조회 가능하다.

회원 가입, 상품 주문 등에 사용된다. POST 외 PUT이나 PATCH는 html스펙 상 불가하다.

POST는 서버에 요청 데이터를 보낼 때 같은 요청을 여러번 할 경우 요청마다 db등에 요청 데이터가 추가된다.
<br>따라서 서버의 상태가 계속 달라지므로 **멱등성에 위배**되며 데이터를 변경하는 메서드이므로 **안전한 메서드**도 아니다.



### 참고
https://hahahoho5915.tistory.com/62

https://brilliantdevelop.tistory.com/33

https://hudi.blog/http-method-idempotent/

